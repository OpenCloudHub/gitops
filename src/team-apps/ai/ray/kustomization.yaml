apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ai

resources:
  # - external-secrets.yaml
  - http-route.yaml
  - service.yaml

helmCharts:
  - name: kuberay-operator
    releaseName: kuberay-operator
    version: 1.4.2
    repo: https://ray-project.github.io/kuberay-helm/
    namespace: ai
    includeCRDs: true
    valuesInline:
      metrics:
        # -- Whether KubeRay operator should emit control plane metrics.
        enabled: true
        serviceMonitor:
          # -- Enable a prometheus ServiceMonitor
          enabled: false
      env:
      - name: RAY_GRAFANA_IFRAME_HOST
        value: "https://grafana.observability.internal.opencloudhub.org"
      - name: RAY_GRAFANA_HOST
        value: "http://grafana.observability.svc.cluster.local:80"
      - name: RAY_PROMETHEUS_HOST
        value: "http://prometheus-server.observability.svc.cluster.local:80"
